<?php
$json = '{
  "1":{"ID":"1","NAME":"Моя компания","DEPTH_LEVEL":"1","IBLOCK_SECTION_ID":"null","UF_HEAD":"null"},
  "3":{"ID":"3","NAME":"Отдел продаж","DEPTH_LEVEL":"2","IBLOCK_SECTION_ID":"1","UF_HEAD":"8"},
  "61":{"ID":"61","NAME":"Производственный отдел","DEPTH_LEVEL":"2","IBLOCK_SECTION_ID":"1","UF_HEAD":"10"},
  "65":{"ID":"65","NAME":"Управляющее подразделение","DEPTH_LEVEL":"2","IBLOCK_SECTION_ID":"1","UF_HEAD":"4"},
  "78":{"ID":"78","NAME":"Чат-боты","DEPTH_LEVEL":"2","IBLOCK_SECTION_ID":"1","UF_HEAD":"null"},
  "101":{"ID":"101","NAME":"Тестовое подразделение","DEPTH_LEVEL":"2","IBLOCK_SECTION_ID":"1","UF_HEAD":"null"},
  "115":{"ID":"115","NAME":"Технический отдел (new)","DEPTH_LEVEL":"2","IBLOCK_SECTION_ID":"1","UF_HEAD":"10"},
  "66":{"ID":"66","NAME":"Отдел маркетинга","DEPTH_LEVEL":"3","IBLOCK_SECTION_ID":"65","UF_HEAD":"null"},
  "68":{"ID":"68","NAME":"HR Офис","DEPTH_LEVEL":"3","IBLOCK_SECTION_ID":"61","UF_HEAD":"null"},
  "80":{"ID":"80","NAME":"Подбор мастеров","DEPTH_LEVEL":"3","IBLOCK_SECTION_ID":"65","UF_HEAD":"121"},
  "87":{"ID":"87","NAME":"Отдел дизайна","DEPTH_LEVEL":"3","IBLOCK_SECTION_ID":"115","UF_HEAD":"177"},
  "89":{"ID":"89","NAME":"Отдел снабжения","DEPTH_LEVEL":"3","IBLOCK_SECTION_ID":"3","UF_HEAD":"null"},
  "91":{"ID":"91","NAME":"Отдел контроля качества","DEPTH_LEVEL":"3","IBLOCK_SECTION_ID":"61","UF_HEAD":"null"},
  "98":{"ID":"98","NAME":"IT Отдел","DEPTH_LEVEL":"3","IBLOCK_SECTION_ID":"65","UF_HEAD":"4"},
  "102":{"ID":"102","NAME":"А1","DEPTH_LEVEL":"3","IBLOCK_SECTION_ID":"101","UF_HEAD":"322"},
  "107":{"ID":"107","NAME":"Диспетчерская (new)","DEPTH_LEVEL":"3","IBLOCK_SECTION_ID":"3","UF_HEAD":"6"},
  "110":{"ID":"110","NAME":"Сметно-договорной отдел(new)","DEPTH_LEVEL":"3","IBLOCK_SECTION_ID":"3","UF_HEAD":"8"},
  "116":{"ID":"116","NAME":"HR (new)","DEPTH_LEVEL":"3","IBLOCK_SECTION_ID":"115","UF_HEAD":"null"},
  "117":{"ID":"117","NAME":"Производственный отдел (new)","DEPTH_LEVEL":"3","IBLOCK_SECTION_ID":"115","UF_HEAD":"10"},
  "125":{"ID":"125","NAME":"ОКК (new)","DEPTH_LEVEL":"3","IBLOCK_SECTION_ID":"65","UF_HEAD":"null"},
  "81":{"ID":"81","NAME":"Отдел выдачи","DEPTH_LEVEL":"4","IBLOCK_SECTION_ID":"80","UF_HEAD":"null"},
  "82":{"ID":"82","NAME":"Диспетчера HR","DEPTH_LEVEL":"4","IBLOCK_SECTION_ID":"80","UF_HEAD":"null"},
  "88":{"ID":"88","NAME":"Небо","DEPTH_LEVEL":"4","IBLOCK_SECTION_ID":"87","UF_HEAD":"245"},
  "90":{"ID":"90","NAME":"Подведомственный отдел","DEPTH_LEVEL":"4","IBLOCK_SECTION_ID":"89","UF_HEAD":"null"},
  "103":{"ID":"103","NAME":"А1.1","DEPTH_LEVEL":"4","IBLOCK_SECTION_ID":"102","UF_HEAD":"null"},
  "104":{"ID":"104","NAME":"А1.2","DEPTH_LEVEL":"4","IBLOCK_SECTION_ID":"102","UF_HEAD":"null"},
  "108":{"ID":"108","NAME":"МРИ старший диспетчер","DEPTH_LEVEL":"4","IBLOCK_SECTION_ID":"107","UF_HEAD":"24"},
  "109":{"ID":"109","NAME":"ССА старший диспетчер","DEPTH_LEVEL":"4","IBLOCK_SECTION_ID":"107","UF_HEAD":"25"},
  "126":{"ID":"126","NAME":"Эталон","DEPTH_LEVEL":"4","IBLOCK_SECTION_ID":"87","UF_HEAD":"246"},
  "140":{"ID":"140","NAME":"СК Небо","DEPTH_LEVEL":"4","IBLOCK_SECTION_ID":"117","UF_HEAD":"294"},
  "141":{"ID":"141","NAME":"sknebo","DEPTH_LEVEL":"4","IBLOCK_SECTION_ID":"110","UF_HEAD":"159"},
  "142":{"ID":"142","NAME":"эталон","DEPTH_LEVEL":"4","IBLOCK_SECTION_ID":"110","UF_HEAD":"337"},
  "144":{"ID":"144","NAME":"Эталон","DEPTH_LEVEL":"4","IBLOCK_SECTION_ID":"117","UF_HEAD":"62"},
  "105":{"ID":"105","NAME":"А1.1.1","DEPTH_LEVEL":"5","IBLOCK_SECTION_ID":"103","UF_HEAD":"null"},
  "106":{"ID":"106","NAME":"А1.1.2","DEPTH_LEVEL":"5","IBLOCK_SECTION_ID":"103","UF_HEAD":"null"},
  "111":{"ID":"111","NAME":"НСДО 1","DEPTH_LEVEL":"5","IBLOCK_SECTION_ID":"141","UF_HEAD":"79"},
  "112":{"ID":"112","NAME":"НСДО 2","DEPTH_LEVEL":"5","IBLOCK_SECTION_ID":"141","UF_HEAD":"179"},
  "119":{"ID":"119","NAME":"ТД 1","DEPTH_LEVEL":"5","IBLOCK_SECTION_ID":"140","UF_HEAD":"11"},
  "120":{"ID":"120","NAME":"ТД 2","DEPTH_LEVEL":"5","IBLOCK_SECTION_ID":"140","UF_HEAD":"238"},
  "143":{"ID":"143","NAME":"НСДО  (Б)","DEPTH_LEVEL":"5","IBLOCK_SECTION_ID":"142","UF_HEAD":"31"},
  "145":{"ID":"145","NAME":"ТД 1 Б","DEPTH_LEVEL":"5","IBLOCK_SECTION_ID":"144","UF_HEAD":"217"},
  "121":{"ID":"121","NAME":"Отдел МРР НУ","DEPTH_LEVEL":"6","IBLOCK_SECTION_ID":"119","UF_HEAD":"257"},
  "123":{"ID":"123","NAME":"Отдел МДА НУ","DEPTH_LEVEL":"6","IBLOCK_SECTION_ID":"145","UF_HEAD":"15"},
  "124":{"ID":"124","NAME":"Отдел ЯВО НУ","DEPTH_LEVEL":"6","IBLOCK_SECTION_ID":"120","UF_HEAD":"61"},
  "128":{"ID":"128","NAME":"Отдел ХРТ Спецназ","DEPTH_LEVEL":"6","IBLOCK_SECTION_ID":"120","UF_HEAD":"250"},
  "132":{"ID":"132","NAME":"Отдел ППС НУ","DEPTH_LEVEL":"6","IBLOCK_SECTION_ID":"119","UF_HEAD":"156"},
  "134":{"ID":"134","NAME":"Отдел ССА2 НУ","DEPTH_LEVEL":"6","IBLOCK_SECTION_ID":"120","UF_HEAD":"96"},
  "136":{"ID":"136","NAME":"Отдел СКЮ НУ","DEPTH_LEVEL":"6","IBLOCK_SECTION_ID":"120","UF_HEAD":"293"}
}';
echo '<pre>';
$json = json_decode($json, true);

$getParents = function($children_id, $parents = []) use ($json, &$getParents) {
    print_r($children_id);
    print_r($json[$children_id]);
    print_r($json[$children_id]['IBLOCK_SECTION_ID']);
    echo '<br>';
    $parent_id = $json[$children_id]['IBLOCK_SECTION_ID'];
    if(!is_null($parent_id) && $parent_id) {
        $parents[] = $json[$parent_id];
        if($json[$parent_id]['IBLOCK_SECTION_ID']) {
            return $getParents($json[$parent_id]['IBLOCK_SECTION_ID'], $parents);
        }
    }
    return $parents;
};

print_r(json_encode($getParents("109"), JSON_UNESCAPED_UNICODE));
